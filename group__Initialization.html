<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>1-phase PV router: Initialization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">1-phase PV router
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Initialization</div></div>
</div><!--header-->
<div class="contents">

<p>Functions and classes responsible for system setup and configuration.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8995e5745b217d64477574abf086acc7"><td class="memItemLeft" align="right" valign="top">constexpr <a class="el" href="config__system_8h.html#a3180c835bce68b1c59f64f4055088cca">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Initialization.html#ga8995e5745b217d64477574abf086acc7">getInputPins</a> ()</td></tr>
<tr class="memdesc:ga8995e5745b217d64477574abf086acc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the input pins configuration.  <br /></td></tr>
<tr class="separator:ga8995e5745b217d64477574abf086acc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac599ad38730b3cb0276687ba6cbfaf1e"><td class="memItemLeft" align="right" valign="top">constexpr <a class="el" href="config__system_8h.html#a3180c835bce68b1c59f64f4055088cca">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Initialization.html#gac599ad38730b3cb0276687ba6cbfaf1e">getOutputPins</a> ()</td></tr>
<tr class="memdesc:gac599ad38730b3cb0276687ba6cbfaf1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the output pins configuration.  <br /></td></tr>
<tr class="separator:gac599ad38730b3cb0276687ba6cbfaf1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadeeaa08a0a50d8535fdf2c8a92d4aebc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Initialization.html#gadeeaa08a0a50d8535fdf2c8a92d4aebc">initializeProcessing</a> ()</td></tr>
<tr class="memdesc:gadeeaa08a0a50d8535fdf2c8a92d4aebc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the processing engine, including ports, load states, and ADC setup.  <br /></td></tr>
<tr class="separator:gadeeaa08a0a50d8535fdf2c8a92d4aebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa45f069fe76674a03f3dd560dd00b1ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Initialization.html#gaa45f069fe76674a03f3dd560dd00b1ee">printConfiguration</a> ()</td></tr>
<tr class="memdesc:gaa45f069fe76674a03f3dd560dd00b1ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the configuration during startup.  <br /></td></tr>
<tr class="separator:gaa45f069fe76674a03f3dd560dd00b1ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions and classes responsible for system setup and configuration. </p>
<p>This group includes functions and classes that handle the initialization of hardware components, system parameters, and other configurations required for the proper operation of the system.</p>
<ul>
<li>Ensures that all components are properly configured before the system starts.</li>
<li>Includes setup routines for relays, pins, ADCs, and other peripherals.</li>
<li>Provides default configurations and validations to ensure system stability. </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8995e5745b217d64477574abf086acc7" name="ga8995e5745b217d64477574abf086acc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8995e5745b217d64477574abf086acc7">&#9670;&#160;</a></span>getInputPins()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="config__system_8h.html#a3180c835bce68b1c59f64f4055088cca">uint16_t</a> getInputPins </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the input pins configuration. </p>
<p>This function determines which pins are configured as input pins based on the current hardware setup. It ensures that no pin is configured multiple times and handles special cases like the dual tariff, diversion, rotation, and force pins.</p>
<dl class="section return"><dt>Returns</dt><dd>A 16-bit value representing the configured input pins. Returns 0 if an invalid configuration is detected.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function is marked as <code>constexpr</code> and can be evaluated at compile time. </dd></dl>

<p class="definition">Definition at line <a class="el" href="processing_8cpp_source.html#l00160">160</a> of file <a class="el" href="processing_8cpp_source.html">processing.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__Initialization_ga8995e5745b217d64477574abf086acc7_cgraph.png" border="0" usemap="#agroup__Initialization_ga8995e5745b217d64477574abf086acc7_cgraph" alt=""/></div>
<map name="agroup__Initialization_ga8995e5745b217d64477574abf086acc7_cgraph" id="agroup__Initialization_ga8995e5745b217d64477574abf086acc7_cgraph">
<area shape="rect" title="Retrieves the input pins configuration." alt="" coords="5,31,108,56"/>
<area shape="rect" href="utils__pins_8h.html#abaa54130a12679d0dcc0e7578e0e4d37" title="Read the specified bit." alt="" coords="156,5,231,31"/>
<area shape="rect" href="utils__pins_8h.html#a23ed26b879b65f5ddf07facc1e4b18bc" title="Set the specified bit to 1." alt="" coords="160,55,227,80"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__Initialization_ga8995e5745b217d64477574abf086acc7_icgraph.png" border="0" usemap="#agroup__Initialization_ga8995e5745b217d64477574abf086acc7_icgraph" alt=""/></div>
<map name="agroup__Initialization_ga8995e5745b217d64477574abf086acc7_icgraph" id="agroup__Initialization_ga8995e5745b217d64477574abf086acc7_icgraph">
<area shape="rect" title="Retrieves the input pins configuration." alt="" coords="308,5,411,31"/>
<area shape="rect" href="group__Initialization.html#gadeeaa08a0a50d8535fdf2c8a92d4aebc" title="Initializes the processing engine, including ports, load states, and ADC setup." alt="" coords="112,5,260,31"/>
<area shape="rect" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d" title="Called once during startup." alt="" coords="5,5,64,31"/>
</map>
</div>

</div>
</div>
<a id="gac599ad38730b3cb0276687ba6cbfaf1e" name="gac599ad38730b3cb0276687ba6cbfaf1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac599ad38730b3cb0276687ba6cbfaf1e">&#9670;&#160;</a></span>getOutputPins()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="config__system_8h.html#a3180c835bce68b1c59f64f4055088cca">uint16_t</a> getOutputPins </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the output pins configuration. </p>
<p>This function determines which pins are configured as output pins based on the current hardware setup. It ensures that no pin is configured multiple times and handles special cases like the watchdog pin.</p>
<dl class="section return"><dt>Returns</dt><dd>A 16-bit value representing the configured output pins. Returns 0 if an invalid configuration is detected.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function is marked as <code>constexpr</code> and can be evaluated at compile time. </dd></dl>

<p class="definition">Definition at line <a class="el" href="processing_8cpp_source.html#l00109">109</a> of file <a class="el" href="processing_8cpp_source.html">processing.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__Initialization_gac599ad38730b3cb0276687ba6cbfaf1e_cgraph.png" border="0" usemap="#agroup__Initialization_gac599ad38730b3cb0276687ba6cbfaf1e_cgraph" alt=""/></div>
<map name="agroup__Initialization_gac599ad38730b3cb0276687ba6cbfaf1e_cgraph" id="agroup__Initialization_gac599ad38730b3cb0276687ba6cbfaf1e_cgraph">
<area shape="rect" title="Retrieves the output pins configuration." alt="" coords="5,80,120,105"/>
<area shape="rect" href="utils__pins_8h.html#abaa54130a12679d0dcc0e7578e0e4d37" title="Read the specified bit." alt="" coords="217,5,291,31"/>
<area shape="rect" href="utils__pins_8h.html#a23ed26b879b65f5ddf07facc1e4b18bc" title="Set the specified bit to 1." alt="" coords="221,55,287,80"/>
<area shape="rect" href="classRelayEngine.html#a981b20422ed19d2aa87d042c583173ee" title="Get the relay object." alt="" coords="168,104,340,129"/>
<area shape="rect" href="classRelayEngine.html#a1ed9500ebf4f6d7afb519c377fab42d3" title="Get the number of relays." alt="" coords="171,153,337,179"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__Initialization_gac599ad38730b3cb0276687ba6cbfaf1e_icgraph.png" border="0" usemap="#agroup__Initialization_gac599ad38730b3cb0276687ba6cbfaf1e_icgraph" alt=""/></div>
<map name="agroup__Initialization_gac599ad38730b3cb0276687ba6cbfaf1e_icgraph" id="agroup__Initialization_gac599ad38730b3cb0276687ba6cbfaf1e_icgraph">
<area shape="rect" title="Retrieves the output pins configuration." alt="" coords="308,5,423,31"/>
<area shape="rect" href="group__Initialization.html#gadeeaa08a0a50d8535fdf2c8a92d4aebc" title="Initializes the processing engine, including ports, load states, and ADC setup." alt="" coords="112,5,260,31"/>
<area shape="rect" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d" title="Called once during startup." alt="" coords="5,5,64,31"/>
</map>
</div>

</div>
</div>
<a id="gadeeaa08a0a50d8535fdf2c8a92d4aebc" name="gadeeaa08a0a50d8535fdf2c8a92d4aebc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadeeaa08a0a50d8535fdf2c8a92d4aebc">&#9670;&#160;</a></span>initializeProcessing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initializeProcessing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the processing engine, including ports, load states, and ADC setup. </p>
<p>This function performs the following tasks:</p><ul>
<li>Initializes the DC offset array for voltage samples.</li>
<li>Configures the input and output pins based on the hardware setup.</li>
<li>Sets up the ADC in free-running mode with interrupts enabled.</li>
<li>Prepares the system for processing energy and load states.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>This function must be called during system initialization to ensure proper operation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="processing_8cpp_source.html#l00212">212</a> of file <a class="el" href="processing_8cpp_source.html">processing.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__Initialization_gadeeaa08a0a50d8535fdf2c8a92d4aebc_cgraph.png" border="0" usemap="#agroup__Initialization_gadeeaa08a0a50d8535fdf2c8a92d4aebc_cgraph" alt=""/></div>
<map name="agroup__Initialization_gadeeaa08a0a50d8535fdf2c8a92d4aebc_cgraph" id="agroup__Initialization_gadeeaa08a0a50d8535fdf2c8a92d4aebc_cgraph">
<area shape="rect" title="Initializes the processing engine, including ports, load states, and ADC setup." alt="" coords="5,132,153,157"/>
<area shape="rect" href="utils__pins_8h.html#aeae4199ba44e9e5de9d228a6b6a8133e" title="Clear the specified bit." alt="" coords="241,5,320,31"/>
<area shape="rect" href="utils__pins_8h.html#a23ed26b879b65f5ddf07facc1e4b18bc" title="Set the specified bit to 1." alt="" coords="461,57,527,83"/>
<area shape="rect" href="group__Initialization.html#ga8995e5745b217d64477574abf086acc7" title="Retrieves the input pins configuration." alt="" coords="229,107,332,132"/>
<area shape="rect" href="group__Initialization.html#gac599ad38730b3cb0276687ba6cbfaf1e" title="Retrieves the output pins configuration." alt="" coords="223,156,338,181"/>
<area shape="rect" href="utils__pins_8h.html#ac106ac6266d5d7a5328ea0c63778a873" title="Set the pins as INPUT_PULLUP." alt="" coords="201,205,360,231"/>
<area shape="rect" href="utils__pins_8h.html#ad448cf4026a22a8190ea178a02702b2e" title="Set the pins as OUTPUT." alt="" coords="216,255,345,280"/>
<area shape="rect" href="utils__pins_8h.html#abaa54130a12679d0dcc0e7578e0e4d37" title="Read the specified bit." alt="" coords="457,107,531,132"/>
<area shape="rect" href="classRelayEngine.html#a981b20422ed19d2aa87d042c583173ee" title="Get the relay object." alt="" coords="408,156,580,181"/>
<area shape="rect" href="classRelayEngine.html#a1ed9500ebf4f6d7afb519c377fab42d3" title="Get the number of relays." alt="" coords="411,205,577,231"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__Initialization_gadeeaa08a0a50d8535fdf2c8a92d4aebc_icgraph.png" border="0" usemap="#agroup__Initialization_gadeeaa08a0a50d8535fdf2c8a92d4aebc_icgraph" alt=""/></div>
<map name="agroup__Initialization_gadeeaa08a0a50d8535fdf2c8a92d4aebc_icgraph" id="agroup__Initialization_gadeeaa08a0a50d8535fdf2c8a92d4aebc_icgraph">
<area shape="rect" title="Initializes the processing engine, including ports, load states, and ADC setup." alt="" coords="112,5,260,31"/>
<area shape="rect" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d" title="Called once during startup." alt="" coords="5,5,64,31"/>
</map>
</div>

</div>
</div>
<a id="gaa45f069fe76674a03f3dd560dd00b1ee" name="gaa45f069fe76674a03f3dd560dd00b1ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa45f069fe76674a03f3dd560dd00b1ee">&#9670;&#160;</a></span>printConfiguration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void printConfiguration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print the configuration during startup. </p>
<p>This function outputs the system configuration to the Serial output during startup. It includes details about the sketch, build information, electrical settings, and enabled features.</p>
<ul>
<li>Prints the sketch ID, branch name, commit hash, and build date/time.</li>
<li>Outputs electrical settings such as power calibration, voltage calibration, and phase calibration.</li>
<li>Displays enabled features like temperature sensing, dual tariff, load rotation, relay diversion, and RF communication.</li>
<li>Logs the selected datalogging format (Human-readable, IoT, or EmonCMS). </li>
</ul>

<p class="definition">Definition at line <a class="el" href="utils_8h_source.html#l00045">45</a> of file <a class="el" href="utils_8h_source.html">utils.h</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__Initialization_gaa45f069fe76674a03f3dd560dd00b1ee_cgraph.png" border="0" usemap="#agroup__Initialization_gaa45f069fe76674a03f3dd560dd00b1ee_cgraph" alt=""/></div>
<map name="agroup__Initialization_gaa45f069fe76674a03f3dd560dd00b1ee_cgraph" id="agroup__Initialization_gaa45f069fe76674a03f3dd560dd00b1ee_cgraph">
<area shape="rect" title="Print the configuration during startup." alt="" coords="5,5,144,31"/>
<area shape="rect" href="processing_8cpp.html#aa2b3b1d496e37e5f29af6a766743dc8b" title="Print the settings used for the selected output mode." alt="" coords="192,5,448,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__Initialization_gaa45f069fe76674a03f3dd560dd00b1ee_icgraph.png" border="0" usemap="#agroup__Initialization_gaa45f069fe76674a03f3dd560dd00b1ee_icgraph" alt=""/></div>
<map name="agroup__Initialization_gaa45f069fe76674a03f3dd560dd00b1ee_icgraph" id="agroup__Initialization_gaa45f069fe76674a03f3dd560dd00b1ee_icgraph">
<area shape="rect" title="Print the configuration during startup." alt="" coords="112,5,251,31"/>
<area shape="rect" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d" title="Called once during startup." alt="" coords="5,5,64,31"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
