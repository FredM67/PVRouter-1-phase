<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>1-phase PV router: Mk2_fasterControl_Full/teleinfo.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">1-phase PV router
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_576a50aa5f524dfed8b859bbdd5e306e.html">Mk2_fasterControl_Full</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">teleinfo.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Manages telemetry data and frame formatting.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &quot;<a class="el" href="config__system_8h_source.html">config_system.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_8h_source.html">config.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for teleinfo.h:</div>
<div class="dyncontent">
<div class="center"><img src="teleinfo_8h__incl.png" border="0" usemap="#aMk2__fasterControl__Full_2teleinfo_8h" alt=""/></div>
<map name="aMk2__fasterControl__Full_2teleinfo_8h" id="aMk2__fasterControl__Full_2teleinfo_8h">
<area shape="rect" title="Manages telemetry data and frame formatting." alt="" coords="1225,5,1397,45"/>
<area shape="rect" title=" " alt="" coords="1320,313,1404,339"/>
<area shape="poly" title=" " alt="" coords="1398,38,1456,54,1517,79,1574,116,1598,139,1619,165,1627,181,1630,196,1623,223,1602,247,1572,267,1535,284,1495,298,1418,317,1417,312,1493,292,1533,279,1569,262,1599,243,1618,221,1624,196,1622,183,1614,168,1594,142,1571,120,1515,84,1455,59,1397,43"/>
<area shape="rect" href="config__system_8h.html" title="Basic configuration values to be set by the end&#45;user." alt="" coords="694,240,822,265"/>
<area shape="poly" title=" " alt="" coords="1262,48,950,169,796,237,794,232,948,164,1260,43"/>
<area shape="rect" href="config_8h.html" title="Configuration values to be set by the end&#45;user." alt="" coords="1275,93,1348,119"/>
<area shape="poly" title=" " alt="" coords="1314,46,1314,79,1309,79,1309,46"/>
<area shape="poly" title=" " alt="" coords="823,261,834,263,1099,294,1307,316,1306,322,1098,300,834,268,822,266"/>
<area shape="rect" href="type__traits_8hpp.html" title="Some useful but missing stl functions templates." alt="" coords="997,313,1117,339"/>
<area shape="poly" title=" " alt="" coords="807,263,996,307,994,313,805,268"/>
<area shape="rect" href="conditional_8hpp.html" title=" " alt="" coords="5,394,201,419"/>
<area shape="poly" title=" " alt="" coords="997,332,663,350,439,366,213,389,177,394,176,389,212,384,439,361,662,344,996,327"/>
<area shape="rect" href="enable__if_8hpp.html" title=" " alt="" coords="225,387,365,427"/>
<area shape="poly" title=" " alt="" coords="997,333,731,351,559,367,385,389,379,390,378,385,384,384,558,362,730,346,996,328"/>
<area shape="rect" href="integral__constant_8hpp.html" title=" " alt="" coords="710,621,857,661"/>
<area shape="poly" title=" " alt="" coords="1117,325,1201,329,1295,338,1379,356,1410,369,1432,385,1456,417,1465,437,1470,460,1469,485,1461,512,1443,543,1414,575,1386,589,1336,601,1189,619,1019,632,871,639,871,634,1019,626,1189,614,1335,595,1384,584,1411,571,1439,539,1456,510,1464,484,1465,460,1460,439,1451,420,1428,389,1408,373,1377,361,1294,343,1200,334,1117,330"/>
<area shape="rect" href="is__array_8hpp.html" title=" " alt="" coords="1560,394,1735,419"/>
<area shape="poly" title=" " alt="" coords="1117,331,1306,353,1541,384,1573,389,1572,394,1540,389,1306,358,1116,336"/>
<area shape="rect" href="is__base__of_8hpp.html" title=" " alt="" coords="1811,387,1956,427"/>
<area shape="poly" title=" " alt="" coords="1117,327,1408,344,1599,361,1792,384,1798,385,1797,390,1791,389,1598,366,1408,350,1117,332"/>
<area shape="rect" href="remove__reference_8hpp.html" title=" " alt="" coords="1755,475,1924,500"/>
<area shape="poly" title=" " alt="" coords="1117,327,1470,348,1648,365,1711,374,1748,384,1773,400,1795,420,1827,461,1823,464,1791,424,1770,404,1746,389,1710,379,1647,370,1470,354,1117,333"/>
<area shape="rect" href="is__class_8hpp.html" title=" " alt="" coords="969,475,1144,500"/>
<area shape="poly" title=" " alt="" coords="1059,339,1059,461,1054,461,1054,339"/>
<area shape="rect" href="is__const_8hpp.html" title=" " alt="" coords="1509,548,1687,573"/>
<area shape="poly" title=" " alt="" coords="1117,327,1211,332,1320,342,1421,359,1462,371,1491,384,1529,418,1558,458,1579,499,1593,534,1588,536,1574,501,1553,461,1525,421,1489,389,1460,376,1420,364,1320,348,1211,337,1117,332"/>
<area shape="rect" href="is__convertible_8hpp.html" title=" " alt="" coords="1168,475,1383,500"/>
<area shape="poly" title=" " alt="" coords="1072,337,1119,377,1181,424,1245,466,1242,470,1178,429,1116,381,1068,341"/>
<area shape="rect" href="is__enum_8hpp.html" title=" " alt="" coords="790,394,969,419"/>
<area shape="poly" title=" " alt="" coords="1032,341,919,391,916,386,1030,336"/>
<area shape="rect" href="is__floating__point_8hpp.html" title=" " alt="" coords="542,475,699,500"/>
<area shape="poly" title=" " alt="" coords="997,335,886,352,823,368,763,389,729,406,697,427,645,468,642,463,694,423,726,402,761,384,822,363,885,347,996,330"/>
<area shape="rect" href="is__same_8hpp.html" title=" " alt="" coords="569,548,673,573"/>
<area shape="poly" title=" " alt="" coords="997,334,855,350,773,366,692,389,598,417,564,437,548,453,532,476,529,485,529,494,538,511,557,527,579,540,577,544,554,531,534,515,524,495,523,484,528,473,544,450,560,433,596,412,691,384,772,361,855,345,996,328"/>
<area shape="rect" href="is__integral_8hpp.html" title=" " alt="" coords="724,475,843,500"/>
<area shape="poly" title=" " alt="" coords="997,334,935,341,870,352,814,367,794,377,780,388,772,405,770,423,776,461,771,462,764,424,767,403,776,385,791,373,812,362,869,346,935,336,996,329"/>
<area shape="rect" href="is__pointer_8hpp.html" title=" " alt="" coords="830,548,1017,573"/>
<area shape="poly" title=" " alt="" coords="1050,340,1009,397,960,476,934,536,929,534,956,473,1005,394,1046,337"/>
<area shape="rect" href="is__signed_8hpp.html" title=" " alt="" coords="56,475,241,500"/>
<area shape="poly" title=" " alt="" coords="997,331,863,335,696,345,536,362,471,374,423,389,410,398,401,408,392,419,378,429,311,457,243,474,242,469,309,452,375,424,388,415,397,404,406,394,421,384,470,369,535,357,696,339,863,330,996,326"/>
<area shape="rect" href="is__unsigned_8hpp.html" title=" " alt="" coords="265,475,467,500"/>
<area shape="poly" title=" " alt="" coords="997,332,876,337,728,348,587,365,530,376,487,389,457,405,430,425,387,466,383,462,427,421,455,400,485,384,528,371,586,360,727,343,876,332,996,327"/>
<area shape="rect" href="make__unsigned_8hpp.html" title=" " alt="" coords="1191,394,1418,419"/>
<area shape="poly" title=" " alt="" coords="1094,336,1257,387,1255,392,1092,341"/>
<area shape="rect" href="make__void_8hpp.html" title=" " alt="" coords="1981,394,2175,419"/>
<area shape="poly" title=" " alt="" coords="1117,328,1547,352,1791,368,1969,384,2005,389,2004,394,1968,389,1790,374,1547,357,1117,333"/>
<area shape="rect" href="remove__const_8hpp.html" title=" " alt="" coords="2199,387,2346,427"/>
<area shape="poly" title=" " alt="" coords="1117,328,1686,356,2186,384,2186,390,1686,361,1117,333"/>
<area shape="rect" title=" " alt="" coords="1610,475,1685,500"/>
<area shape="poly" title=" " alt="" coords="1650,420,1650,461,1645,461,1645,420"/>
<area shape="poly" title=" " alt="" coords="1875,428,1855,464,1850,461,1870,426"/>
<area shape="rect" href="declval_8hpp.html" title=" " alt="" coords="1076,548,1173,573"/>
<area shape="poly" title=" " alt="" coords="1070,498,1106,536,1102,540,1066,502"/>
<area shape="poly" title=" " alt="" coords="1509,574,1490,576,871,635,870,629,1490,571,1509,569"/>
<area shape="poly" title=" " alt="" coords="1252,502,1163,544,1161,540,1250,498"/>
<area shape="poly" title=" " alt="" coords="906,417,1020,467,1017,472,904,422"/>
<area shape="poly" title=" " alt="" coords="937,417,1205,469,1204,475,936,422"/>
<area shape="poly" title=" " alt="" coords="842,422,672,473,670,468,841,417"/>
<area shape="poly" title=" " alt="" coords="882,420,878,459,870,482,856,502,827,519,785,533,687,553,686,548,783,528,825,514,852,498,865,480,872,458,877,419"/>
<area shape="poly" title=" " alt="" coords="867,422,810,468,806,464,863,417"/>
<area shape="poly" title=" " alt="" coords="635,498,686,546,755,610,751,614,683,550,631,502"/>
<area shape="poly" title=" " alt="" coords="623,500,623,534,618,534,618,500"/>
<area shape="rect" href="remove__cv_8hpp.html" title=" " alt="" coords="419,548,540,573"/>
<area shape="poly" title=" " alt="" coords="599,502,516,544,513,539,597,498"/>
<area shape="poly" title=" " alt="" coords="645,571,733,613,731,618,643,576"/>
<area shape="poly" title=" " alt="" coords="786,500,786,607,781,607,781,500"/>
<area shape="poly" title=" " alt="" coords="758,502,661,545,659,540,756,498"/>
<area shape="poly" title=" " alt="" coords="735,503,542,547,541,542,734,497"/>
<area shape="poly" title=" " alt="" coords="904,576,830,617,828,612,901,571"/>
<area shape="poly" title=" " alt="" coords="176,498,266,533,381,571,464,590,548,606,697,628,696,633,547,611,463,595,380,576,264,538,174,503"/>
<area shape="poly" title=" " alt="" coords="229,497,552,545,555,546,555,551,551,551,228,503"/>
<area shape="poly" title=" " alt="" coords="202,497,413,542,412,548,201,503"/>
<area shape="poly" title=" " alt="" coords="370,499,382,536,393,555,408,571,428,583,457,593,532,611,617,623,697,631,696,637,616,628,531,616,456,598,426,588,404,575,388,558,377,538,365,501"/>
<area shape="poly" title=" " alt="" coords="408,497,567,542,566,547,406,503"/>
<area shape="poly" title=" " alt="" coords="386,498,451,538,448,543,383,502"/>
<area shape="rect" href="type__identity_8hpp.html" title=" " alt="" coords="1265,548,1400,573"/>
<area shape="poly" title=" " alt="" coords="1333,417,1368,439,1385,455,1398,474,1401,493,1394,512,1381,528,1365,542,1361,538,1377,524,1389,509,1396,493,1393,476,1381,458,1365,443,1330,422"/>
<area shape="poly" title=" " alt="" coords="1266,574,871,630,870,625,1265,569"/>
<area shape="poly" title=" " alt="" coords="1275,117,1170,139,1041,169,914,205,807,238,805,233,912,200,1040,164,1168,134,1274,112"/>
<area shape="rect" href="debug_8h.html" title="Some macro for the Serial Output and Debugging." alt="" coords="846,240,921,265"/>
<area shape="poly" title=" " alt="" coords="1275,121,1119,169,927,238,926,233,1117,164,1274,116"/>
<area shape="rect" href="types_8h.html" title="Some basics classes/types." alt="" coords="1393,240,1464,265"/>
<area shape="poly" title=" " alt="" coords="1315,118,1321,153,1328,172,1339,190,1363,214,1390,232,1388,236,1359,218,1335,194,1324,175,1316,154,1310,119"/>
<area shape="rect" href="utils__dualtariff_8h.html" title="Some utility functions for dual tariff feature." alt="" coords="1349,167,1477,192"/>
<area shape="poly" title=" " alt="" coords="1329,116,1386,156,1383,161,1326,121"/>
<area shape="rect" href="utils__relay_8h.html" title="Some utility functions for the relay output feature." alt="" coords="1129,167,1229,192"/>
<area shape="poly" title=" " alt="" coords="1291,121,1214,162,1212,158,1289,116"/>
<area shape="rect" href="utils__temp_8h.html" title="Provides utilities for managing temperature sensors." alt="" coords="1501,167,1604,192"/>
<area shape="poly" title=" " alt="" coords="1344,116,1495,160,1493,166,1343,121"/>
<area shape="poly" title=" " alt="" coords="1420,267,1384,305,1380,301,1416,264"/>
<area shape="poly" title=" " alt="" coords="1394,265,1381,268,1131,315,1130,310,1380,263,1392,260"/>
<area shape="rect" href="constants_8h.html" title="Some constants." alt="" coords="1512,313,1609,339"/>
<area shape="poly" title=" " alt="" coords="1451,263,1528,304,1526,309,1449,268"/>
<area shape="poly" title=" " alt="" coords="1434,190,1454,204,1472,223,1483,244,1483,255,1479,267,1467,282,1452,295,1418,312,1416,308,1449,290,1463,278,1474,264,1478,254,1478,245,1468,226,1450,208,1431,194"/>
<area shape="poly" title=" " alt="" coords="1129,192,836,241,835,236,1128,186"/>
<area shape="poly" title=" " alt="" coords="1130,192,1045,212,1009,226,987,242,982,258,989,274,1005,290,1024,304,1021,308,1001,294,985,277,977,258,982,238,1006,221,1043,207,1129,186"/>
<area shape="poly" title=" " alt="" coords="1132,195,935,242,933,237,1131,189"/>
<area shape="poly" title=" " alt="" coords="1220,189,1381,235,1379,240,1219,195"/>
<area shape="rect" href="movingAvg_8h.html" title="Code for sliding&#45;window average." alt="" coords="1142,240,1249,265"/>
<area shape="poly" title=" " alt="" coords="1185,192,1192,226,1187,227,1179,193"/>
<area shape="rect" href="ewma__avg_8hpp.html" title="This file implements an Exponentially Weighted Moving Average template class." alt="" coords="996,240,1117,265"/>
<area shape="poly" title=" " alt="" coords="1161,194,1090,235,1087,231,1158,190"/>
<area shape="rect" href="utils__pins_8h.html" title="Some utility functions for pins manipulation." alt="" coords="1273,240,1369,265"/>
<area shape="poly" title=" " alt="" coords="1203,190,1287,231,1284,236,1201,194"/>
<area shape="poly" title=" " alt="" coords="1223,263,1323,305,1321,310,1221,268"/>
<area shape="poly" title=" " alt="" coords="1174,268,1093,309,1090,305,1172,263"/>
<area shape="poly" title=" " alt="" coords="1106,263,1307,309,1306,314,1105,268"/>
<area shape="poly" title=" " alt="" coords="1059,266,1059,300,1054,300,1054,266"/>
<area shape="poly" title=" " alt="" coords="1330,264,1351,300,1346,303,1325,267"/>
<area shape="poly" title=" " alt="" coords="1550,193,1531,229,1516,249,1498,267,1459,293,1418,311,1415,306,1456,288,1495,263,1512,246,1526,226,1545,191"/>
<area shape="poly" title=" " alt="" coords="1520,169,1361,123,1362,117,1521,164"/>
<area shape="poly" title=" " alt="" coords="1560,191,1574,240,1575,271,1570,300,1565,300,1569,271,1569,240,1555,193"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="teleinfo_8h__dep__incl.png" border="0" usemap="#aMk2__fasterControl__Full_2teleinfo_8hdep" alt=""/></div>
<map name="aMk2__fasterControl__Full_2teleinfo_8hdep" id="aMk2__fasterControl__Full_2teleinfo_8hdep">
<area shape="rect" title="Manages telemetry data and frame formatting." alt="" coords="5,5,177,45"/>
<area shape="rect" href="utils_8h.html" title="Some utility functions." alt="" coords="5,93,177,133"/>
<area shape="poly" title=" " alt="" coords="94,59,94,93,89,93,89,59"/>
<area shape="rect" href="main_8cpp.html" title="Main code." alt="" coords="5,181,177,221"/>
<area shape="poly" title=" " alt="" coords="94,147,94,181,89,181,89,147"/>
</map>
</div>
</div>
<p><a href="teleinfo_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTeleInfo.html">TeleInfo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class for managing and sending telemetry information in a specific frame format.  <a href="classTeleInfo.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a820a2f759b537f10c0543d9612390e8c" id="r_a820a2f759b537f10c0543d9612390e8c"><td class="memItemLeft" align="right" valign="top">static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a820a2f759b537f10c0543d9612390e8c">calcBufferSize</a> ()</td></tr>
<tr class="memdesc:a820a2f759b537f10c0543d9612390e8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the total buffer size required for the telemetry frame.  <br /></td></tr>
<tr class="separator:a820a2f759b537f10c0543d9612390e8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9a3eeacd11602f3385056e620652bb7" id="r_aa9a3eeacd11602f3385056e620652bb7"><td class="memItemLeft" align="right" valign="top">static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9a3eeacd11602f3385056e620652bb7">lineSize</a> (size_t tagLen, size_t valueLen)</td></tr>
<tr class="memdesc:aa9a3eeacd11602f3385056e620652bb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the size of a single telemetry line in the frame.  <br /></td></tr>
<tr class="separator:aa9a3eeacd11602f3385056e620652bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages telemetry data and frame formatting. </p>
<dl class="section author"><dt>Author</dt><dd>your name (<a href="#" onclick="location.href='mai'+'lto:'+'you'+'@d'+'oma'+'in'+'.co'+'m'; return false;">you@d<span class="obfuscator">.nosp@m.</span>omai<span class="obfuscator">.nosp@m.</span>n.com</a>) </dd></dl>
<p>This file defines the <code><a class="el" href="classTeleInfo.html" title="A class for managing and sending telemetry information in a specific frame format.">TeleInfo</a></code> class, which is responsible for creating and sending telemetry frames. It includes functions for calculating buffer sizes, formatting data, and ensuring data integrity with checksums.</p>
<ul>
<li><b>Frame Structure</b>: Frames start with a Start-of-Text (STX) character and end with an End-of-Text (ETX) character.</li>
<li><b>Checksum</b>: Ensures data integrity for each line in the frame.</li>
<li><b>Conditional Features</b>: Supports optional features like relay diversion and temperature sensing.</li>
</ul>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-04-04</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2025 </dd></dl>

<p class="definition">Definition in file <a class="el" href="teleinfo_8h_source.html">teleinfo.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a820a2f759b537f10c0543d9612390e8c" name="a820a2f759b537f10c0543d9612390e8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a820a2f759b537f10c0543d9612390e8c">&#9670;&#160;</a></span>calcBufferSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static constexpr size_t calcBufferSize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the total buffer size required for the telemetry frame. </p>
<p>This function computes the size of the buffer needed to store the entire telemetry frame, including all tags, values, and formatting characters. The calculation takes into account the presence of optional features such as relay diversion and temperature sensing.</p>
<dl class="section return"><dt>Returns</dt><dd>The total buffer size as a compile-time constant.</dd></dl>
<p>The buffer size is calculated as follows:</p><ul>
<li>1 byte for the start-of-text (STX) character.</li>
<li>1 line for the "P" tag (signed 6 digits).</li>
<li>For multi-phase systems (<code>NO_OF_PHASES &gt; 1</code>):<ul>
<li><code>NO_OF_PHASES</code> lines for the "R" tag (signed 6 digits each).</li>
<li><code>NO_OF_PHASES</code> lines for the "V1" tag (unsigned 5 digits each).</li>
</ul>
</li>
<li>For single-phase systems:<ul>
<li>1 line for the "D" tag (unsigned 4 digits).</li>
<li>1 line for the "E" tag (unsigned 5 digits).</li>
</ul>
</li>
<li>If relay diversion is enabled (<code>RELAY_DIVERSION</code>):<ul>
<li>1 line for the "R" tag (signed 6 digits).</li>
</ul>
</li>
<li>If temperature sensors are present (<code>TEMP_SENSOR_PRESENT</code>):<ul>
<li><code>temperatureSensing.get_size()</code> lines for temperature tags ("T1" to "Tn", 4 digits each).</li>
</ul>
</li>
<li>1 line for the "N" tag (unsigned 5 digits).</li>
<li>1 byte for the end-of-text (ETX) character. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="teleinfo_8h_source.html#l00077">77</a> of file <a class="el" href="teleinfo_8h_source.html">teleinfo.h</a>.</p>

<p class="reference">References <a class="el" href="teleinfo_8h_source.html#l00047">lineSize()</a>, <a class="el" href="config_8h_source.html#l00036">NO_OF_DUMPLOADS</a>, <a class="el" href="config__system_8h_source.html#l00019">NO_OF_PHASES</a>, <a class="el" href="config_8h_source.html#l00044">RELAY_DIVERSION</a>, <a class="el" href="config_8h_source.html#l00080">relays</a>, <a class="el" href="types_8h_source.html#l00094">size()</a>, <a class="el" href="config_8h_source.html#l00046">TEMP_SENSOR_PRESENT</a>, and <a class="el" href="config_8h_source.html#l00090">temperatureSensing</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="teleinfo_8h_a820a2f759b537f10c0543d9612390e8c_cgraph.png" border="0" usemap="#ateleinfo_8h_a820a2f759b537f10c0543d9612390e8c_cgraph" alt=""/></div>
<map name="ateleinfo_8h_a820a2f759b537f10c0543d9612390e8c_cgraph" id="ateleinfo_8h_a820a2f759b537f10c0543d9612390e8c_cgraph">
<area shape="rect" title="Calculates the total buffer size required for the telemetry frame." alt="" coords="5,31,120,56"/>
<area shape="rect" href="teleinfo_8h.html#aa9a3eeacd11602f3385056e620652bb7" title="Calculates the size of a single telemetry line in the frame." alt="" coords="168,5,241,31"/>
<area shape="poly" title=" " alt="" coords="120,30,154,24,155,30,121,36"/>
<area shape="rect" href="types_8h.html#a694147b7171ec0b06bc8880dc100e756" title="Helper function to retrieve the dimension of a C&#45;array." alt="" coords="181,55,229,80"/>
<area shape="poly" title=" " alt="" coords="121,50,168,58,167,64,120,56"/>
</map>
</div>

</div>
</div>
<a id="aa9a3eeacd11602f3385056e620652bb7" name="aa9a3eeacd11602f3385056e620652bb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9a3eeacd11602f3385056e620652bb7">&#9670;&#160;</a></span>lineSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static constexpr size_t lineSize </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>tagLen</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>valueLen</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the size of a single telemetry line in the frame. </p>
<p>This function computes the size of a single line in the telemetry frame, including the tag, value, and formatting characters. Each line consists of:</p><ul>
<li>1 byte for the Line Feed (LF) character.</li>
<li><code>tagLen</code> bytes for the tag.</li>
<li>1 byte for the Tab (TAB) character separating the tag and value.</li>
<li><code>valueLen</code> bytes for the value.</li>
<li>1 byte for the Tab (TAB) character separating the value and checksum.</li>
<li>1 byte for the checksum.</li>
<li>1 byte for the Carriage Return (CR) character.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tagLen</td><td>The length of the tag in bytes. </td></tr>
    <tr><td class="paramname">valueLen</td><td>The length of the value in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The total size of the line in bytes. </dd></dl>

<p class="definition">Definition at line <a class="el" href="teleinfo_8h_source.html#l00047">47</a> of file <a class="el" href="teleinfo_8h_source.html">teleinfo.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="teleinfo_8h_source.html#l00077">calcBufferSize()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="teleinfo_8h_aa9a3eeacd11602f3385056e620652bb7_icgraph.png" border="0" usemap="#ateleinfo_8h_aa9a3eeacd11602f3385056e620652bb7_icgraph" alt=""/></div>
<map name="ateleinfo_8h_aa9a3eeacd11602f3385056e620652bb7_icgraph" id="ateleinfo_8h_aa9a3eeacd11602f3385056e620652bb7_icgraph">
<area shape="rect" title="Calculates the size of a single telemetry line in the frame." alt="" coords="168,5,241,31"/>
<area shape="rect" href="teleinfo_8h.html#a820a2f759b537f10c0543d9612390e8c" title="Calculates the total buffer size required for the telemetry frame." alt="" coords="5,5,120,31"/>
<area shape="poly" title=" " alt="" coords="154,21,120,21,120,15,154,15"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
